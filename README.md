# OrNet [![Build Status](https://travis-ci.org/quinngroup/ornet.svg?branch=master)](https://travis-ci.org/quinngroup/ornet) ![Python status](https://img.shields.io/badge/python-3.6%20%7C%203.7%20%7C%203.8-blue) [![status](https://joss.theoj.org/papers/6fbce182256576a0dd3d35c26f83a9ef/status.svg)](https://joss.theoj.org/papers/6fbce182256576a0dd3d35c26f83a9ef)
Tracking *diffuse* organelles presents more challenges than just characterizing movement– their structures morph into/out of each other much more fluidly than discrete cells. Structural changes in organelles can offer key insight into cellular proccesses. **OrNet** is a Python pipeline for analyzing fluorescence microscopy imagery of mitochondrial protein patterns. 


<img src="img/MitoEx.png" width="400">

*Mitochondria in a single cell, with red flourescent tagging* 

## Dependencies
**Required packages:** 
The complete list of required packages are described in the [requirements.txt](https://github.com/quinngroup/ornet/blob/master/requirements.txt) file.

**Python version:**
This software has been tested on python versions 3.6 - 3.8.

## Installation
Inside of the root directory of this project run:

```pip install .```

This installation process should install all of the required dependencies.
In the event that some of the packages are not installed properly,
please refer to the dependencies section and manually install all that are listed.

## Testing
Inside of the "tests" sub-directory, run the following command:

```
python ornet_tests.py
```

7 tests, from various checkpoints along the pipeline, should run without any failures.

## Usage
Ornet can be utilized by calling the Pipeline module from either the command line interface or in a script.
Pipeline will output a directory of the following structure:

```
├── outputs/
│   ├── singles/
│   ├── intermediates/
│   ├── distances/
```

The singles sub-directory will contain the individual videos (.avi) of each extracted cell from the original video, 
intermediates contain compressed numpy files (.npz) that store the means, covariances, weights, and precisions
matrices generated by the gaussian mixture model (GMM) in the pipeline, and the distances directory contains numpy files (.npy)
that represent the divergence metrics between components of the GMM.

### Command Line Interface:
```
python -m ornet.Pipeline -i <input video or directory> -m <mask directory> -o <output directory>
```

For more detailed information regarding command line options the "-h" flag can be utilized

```
python -m ornet.Pipeline -h
```

### Python script:
```
from ornet import Pipeline as pipeline

pipeline.run(input_path, mask_path, output_path)
```

## Community Guidelines
### Requests or Questions
For any questions or change requests related to this project, please create an issue [here](https://github.com/quinngroup/ornet/issues). We ask that you use labels, such as "feature request" or "question", when creating an issue.

### Reporting Issues
If you experinece any unexpected behavior with this software, please document it using this repository's [issues](https://github.com/quinngroup/ornet/issues) section. Please tag issues of this nature with the "unexpected behavior" label.

##### Documentation Process
1. Post a concise description of the unexpected behavior.
2. Include a small code snippet that can reproduce the behavior.
3. Describe the results of the snippet.
4. Detail the expected results of the snippet.

##### Issue fixes
If you would like to submit a fix for our developers to review, complete the following steps:
1. If an issue does not already exist for this problem, create one according to the above documentation process.
2. Fork the project.
3. Apply your changes.
4. Create a pull request, and include in the request a reference to the issue.

## Publications
If you are using OrNet in a scientific paper, please see the following publications:

[Dynamic Social Network Modeling of Diffuse Subcellular Morphologies](https://conference.scipy.org/proceedings/scipy2018/Andrew_Durden.html)

[Modelling Diffuse Subcellular Protein Structures as Dynamic Social Networks](https://arxiv.org/abs/1904.12960)

